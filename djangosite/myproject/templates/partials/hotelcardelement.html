{% load app_tags %} 

  <div
    hx-get="{% url 'hotel-cards' %}?page={{ page_obj.number|add:1 }}"
    hx-trigger="revealed"
    hx-swap="afterend"
    hx-target="this"
    class="col"
  >
  {% for hotelCard in page_obj %} 

    <div class="hotel-list">
      <!-- individual hotel cards: -->
      <div class="grid">
        <div>
          <img id="hotelimg" src="" alt="../static/images/hotel-list-img.png" />
        </div>
        <div class="hotel-right">
          <h2 id="hotelname">{{hotelCard.id}}</h2>
          <p>
            <!-- Singapore {{ dest_list_models.term }} <br /> -->
            Hotel Website
          </p>
          <div class="stars-outer">
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
          </div>

          <div
            style="
              position: absolute;
              top: 0;
              right: 5px;
              margin-top: 50px;
              margin-right: 10px;
              float: right;
            "
          >
            <p>
              Cheapest Room: <br />
              <span class="price">${{hotelCard.lowest_price}} </span>
            </p>
            <a
              href="{% url 'room-list-test-api' destId hotelCard.id|render_name_api3 hotelCard.id checkin checkout guests %}"
              class="btn"
              style="background-color: #f58216; float: right"
              ><b>SEE DETAILS ></b></a
            >
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
    
</div>

{% comment %}
 <!-- I don't know what these are for so i deleted them -->
      <!-- {% if forloop.last %}
      {% else %} --> 
{% endcomment %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">

        const sendHttpRequest = (method, url) => {
          const promise = new Promise((resolve, reject) => {
            var request = new XMLHttpRequest()
            request.open(method, url);
            request.responseType = 'json';
            request.onload = () => {
              resolve(request.response);
            };
            request.send();
          });
          return promise;
        };

        var hotelname = $("#hotelname").text();
        var api3StrBase = 'https://hotelapi.loyalty.dev/api/hotels/'
        var api3Str = api3StrBase.concat(hotelname)
        console.log('hello')
        console.log(api3Str)

        const getData = () => {
          sendHttpRequest('GET', api3Str)
          .then(responseData => {
            console.log(responseData);

            $.ajax({
              url: "{% url 'hotel-cards' %}"
            }).success(function(response) {
              
              // from response need to get hotelName
              $('hotelname').html('NEW HOTE NAME')

              // from response need to get hotel_index_images
              $('hotelimg').attr('src', 'NEW IMG URL');

            })
            

          });
        };

      </script>