{% load app_tags %} 

  <div
    hx-get="{% url 'hotel-cards' %}?page={{ page_obj.number|add:1 }}"
    hx-trigger="revealed"
    hx-swap="afterend"
    hx-target="this"
    class="col"
  >
  {% for hotelCard in page_obj %} 

    <div class="hotel-list">
      <!-- individual hotel cards: -->
      <div class="grid">
        <div>
          <img id="hotelimg" src="../static/images/hotel-list-img.png" alt="../static/images/hotel-list-img.png" />
        </div>
        <div class="hotel-right">
          <h2 id="hotelname">{{hotelCard.id}}</h2>
          <p>
            <!-- Singapore {{ dest_list_models.term }} <br /> -->
            Hotel Website
          </p>
          <div class="stars-outer">
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
          </div>

          <div
            style="
              position: absolute;
              top: 0;
              right: 5px;
              margin-top: 50px;
              margin-right: 10px;
              float: right;
            "
          >
            <p>
              Cheapest Room: <br />
              <span class="price">${{hotelCard.lowest_price}} </span>
            </p>
            <a
              href="{% url 'room-list-test-api' destId hotelCard.id|render_name_api3 hotelCard.id checkin checkout guests %}"
              class="btn"
              style="background-color: #f58216; float: right"
              ><b>SEE DETAILS ></b></a
            >
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
    
</div>

{% comment %}
 <!-- I don't know what these are for so i deleted them -->
      <!-- {% if forloop.last %}
      {% else %} --> 
{% endcomment %}

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript">

        // This will run once document loads
        $( document ).ready(function() {
              console.log( "~ Document ready!" );

              // first, set up api url here:s
              var hotelname = $("#hotelname").text();
              var api3StrBase = 'https://hotelapi.loyalty.dev/api/hotels/'
              var api3Str = api3StrBase.concat(hotelname);
              console.log('~api str:',api3Str);

              //then, calling sendHTTPRequest function to get api response
              console.log("~this is from getData function");
              const xhr = new XMLHttpRequest();
              xhr.open('GET', api3Str, true);
              xhr.setRequestHeader("Access-Control-Allow-Origin", "*");
              // xhr.setRequestHeader('Content-type', 'application/json')
              // xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest'); 
              xhr.responseType = 'json';
              xhr.onload = () => {
                const data = xhr.response;
                console.log(data);
              };
              xhr.send();
              

              // This function changes the Hotel Name and Hotel Img.
              $(function() {
                // Replace hotelName
                var hotelId =  $("#hotelname").text();
                console.log("~hotel ID:", hotelId);

                var origHotelName = $("#hotelname");
                console.log("~original hotel name:",origHotelName);
                
                var newHotelName = $("<h2>").html("New hotel name");
                origHotelName.replaceWith(newHotelName);
                
                console.log("~new hotel name:",origHotelName);
                console.log("~hotel ID:", hotelId);

                // Replace hotelImage
                var url = "https://d2ey9sqrvkqdfs.cloudfront.net/diH7/0.jpg"
                $("#hotelimg").attr("src", url );
              });

          });
      </script>